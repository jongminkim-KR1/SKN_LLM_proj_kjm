# ⚾ MLB Manager Simulator

> AI 기반 야구 감독 시뮬레이터 - 실시간 전략 결정과 마운드 대화로 경기를 이끌어가세요

<div align="center">

![Python](https://img.shields.io/badge/Python-3.9+-blue.svg)
![Streamlit](https://img.shields.io/badge/Streamlit-1.28+-red.svg)
![OpenAI](https://img.shields.io/badge/OpenAI-GPT--4o--mini-green.svg)
![Ollama](https://img.shields.io/badge/Ollama-EEVE--Korean-orange.svg)
![License](https://img.shields.io/badge/License-MIT-yellow.svg)

</div>

---

## 📌 목차

- [프로젝트 배경](#-프로젝트-배경)
- [주요 기능](#-주요-기능)
- [게임 규칙](#-게임-규칙)
- [선수 데이터 구성](#-선수-데이터-구성)
- [스탯 시스템](#-스탯-시스템)
- [기술 스택](#-기술-스택)
- [설치 및 실행](#-설치-및-실행)
- [프로젝트 구조](#-프로젝트-구조)
- [라이선스](#-라이선스)

---

## 🎯 프로젝트 배경

### "야구는 결정의 게임이다"

야구는 다른 스포츠와 달리 **상황별로 무수히 많은 선택지**가 존재하는 전략 게임입니다.

- 5회말 2사 만루, 선발투수를 계속 믿을 것인가?
- 7회초 1점차 리드, 상대 4번 타자 앞에서 고의4구를 할 것인가?
- 9회말 동점 상황, 번트를 대느냐 강타를 노리느냐?

이러한 **결정적 순간의 선택**이 경기의 흐름을 완전히 바꿉니다.

### 세이버메트릭스(Sabermetrics)와 현대 야구

#### 전통 지표의 한계
전통적으로 야구에서는 다음과 같은 기본 지표만 사용했습니다:
- **타자**: 타율(.AVG), 홈런(HR), 타점(RBI)
- **투수**: 방어율(ERA), 승수(W), 세이브(SV)

하지만 이런 지표들은:
- **타율**: 볼넷과 장타력을 무시 (타율 .300, 10홈런 vs 타율 .250, 50홈런?)
- **타점**: 앞 타자의 출루 능력에 의존 (타자의 실력을 정확히 반영 못함)
- **방어율**: 수비 실책에 영향을 받음 (투수가 컨트롤할 수 없는 요소)
- **승수**: 타선 지원에 의존 (에이스가 0-1로 져도 패배 기록)

#### 세이버메트릭스의 등장
1970년대 빌 제임스(Bill James)가 창시한 **세이버메트릭스**는 통계적 분석을 통해 선수의 **진짜 기여도**를 측정합니다.

**핵심 지표:**
- **wOBA** (weighted On-Base Average): 출루+장타를 가중치로 평가
- **wRC+** (weighted Runs Created Plus): 득점 창출 능력 (100=평균, 150=평균 대비 50% 우수)
- **FIP** (Fielding Independent Pitching): 투수가 직접 컨트롤하는 삼진/볼넷/홈런만 반영
- **WAR** (Wins Above Replacement): 대체 선수 대비 승리 기여도 (1 WAR = 약 800만 달러 가치)
- **ISO** (Isolated Power): 순수 장타력 (SLG - AVG)
- **K%/BB%**: 삼진율/볼넷율 (타석당 비율, 더 정확한 평가)
- **GB%** (Ground Ball %): 땅볼 유도율 (투수의 구질 특성)
- **BsR** (Base Running Runs): 주루 기여도 (도루 성공/실패, 진루 센스 등)

**실제 사례:**
```
선수 A: .320 타율, 10홈런, ISO .120, wRC+ 110 → 준수한 컨택 히터
선수 B: .250 타율, 45홈런, ISO .270, wRC+ 145 → 팀 에이스급 강타자
```
전통 지표로는 A가 우수해 보이지만, **세이버메트릭스는 B가 훨씬 가치 있다**고 판단.

#### 20-80 스카우트 스케일
MLB 스카우터들은 **20-80 스케일**로 선수 능력을 평가합니다:
- **80**: 리그 최정상 (Mike Trout의 종합 능력)
- **70**: All-Star급 (Shohei Ohtani의 Power)
- **60**: 평균 이상 레귤러
- **50**: MLB 평균 선수
- **40**: 평균 이하 (벤치 선수)
- **20-30**: 메이저리그 최하위


### 개발 동기: 야구를 더 깊이있게 이해하자

#### 야구 팬으로서의 의문

TV로 야구를 보다 보면 이런 생각이 듭니다:

- "중계진이 말하는 'wRC+ 145'가 정확히 뭐지? 타율 .250인데 왜 좋은 선수래?"
- "삼진을 많이 당하는데도 좋은 타자라고? 홈런 많이 치면 삼진은 상관없나?"
- "이 투수 방어율은 높은데 FIP는 낮네... 운이 나빴다는 건가?"
- "감독이 왜 저기서 고의4구를 했지? 다음 타자가 더 센 거 같은데..."

**경기중에 일어나는 상황 및 지표들을 이해하고 싶어 이 프로젝트를 시작하게 됨.**

#### 이 프로젝트가 제공하는 것

**1. 세이버메트릭스를 실제 경기로 체험하기**

단순히 수치를 보는 게 아니라, **실제 경기 상황에서 어떻게 작동하는지** 직접 느낄 수 있습니다.

```python
# 실제 게임에 적용된 공식
walk_rate = 8.5 + (타자_eye - 50)/50 * 4 - (투수_control - 50)/50 * 3
```

- **타자의 Eye(선구안, BB% 기반)**가 높으면 볼넷이 실제로 늘어납니다
- **투수의 Stuff(구위, K% 기반)**가 높으면 삼진을 많이 잡습니다
- **ISO(순수 장타력)**가 높은 타자는 홈런 확률이 2배 이상 차이납니다
- **투수 피로도**가 70%를 넘으면 눈에 띄게 안타를 맞기 시작합니다

경기를 진행하면서 이런 생각을 하게 됩니다:
> "아, Soto는 타율은 낮아도 BB% 15%라 출루를 진짜 잘하네. wRC+ 140이 괜히 높은 게 아니구나."

**2. 중계를 볼 때 더 많은 것이 보이게**

이 시뮬레이터를 플레이 후 실제 야구 중계를 보면:

- ✅ **"저 타자 K% 30%네, 삼진 각이다"** - 삼진율이 경기에 미치는 영향을 체감
- ✅ **"ISO .250 타자인데 적극 스윙하면 홈런 터질 수도"** - 장타력 지표의 의미 파악
- ✅ **"FIP 2.80인데 ERA 3.50? 수비가 안 도와줬구나"** - 투수의 진짜 실력 평가 가능

**숫자가 아닌 '경기 흐름'으로** 세이버메트릭스를 이해하게 됩니다.

**3. 감독의 시각으로 야구 보기**

단순히 결과만 보는 게 아니라, **왜 그런 결정을 내렸는지** 이해할 수 있습니다.

- **득점권에서 고의4구**: Power 80 타자를 피하고 Contact 55 타자를 상대
- **피로한 투수 교체 타이밍**: 피로도 82%에서 안타율이 +8% 상승하는 걸 체감
- **수비위치 이동**: 상대 타자의 타구 분포와 장타 능력에 따른 수비 위치 조정

실제 경기를 볼 때:
> "감독이 왜 저기서 교체했는지 이제 알겠다. 피로도 85%면 안타율 +8%니까..."

**4. AI와 대화하며 상황 분석 배우기**

- **AI 코치(Ollama)**: "현재 상황은... Tatis Jr.의 Power 75를 고려하면 고의4구도 좋은 선택입니다"
  - 능력치를 어떻게 해석하고 전략으로 연결하는지 배움

- **마운드 대화(OpenAI)**: 투수 "솔직히 지쳤습니다...", 포수 "구속이 3km 떨어졌어요"
  - 선수의 심리와 컨디션을 고려한 의사결정 체험

### 이 시뮬레이터가 목표하는 것

#### 목표 1: 세이버메트릭스를 친근하게
"wRC+"나 "FIP" 같은 용어가 어렵게 느껴지지 않도록, **실제 경기 상황으로 체험**하게 합니다.

#### 목표 2: 야구를 보는 새로운 시각
타율과 방어율만 보던 시각에서 → **K%, BB%, ISO, FIP 등 본질적인 지표**로 선수를 평가하는 시각을 갖게 합니다.

#### 목표 3: 통계가 실제 경기에 어떻게 작용하는지 이해
"삼진율 30%"가 단순한 숫자가 아니라 → **10타석 중 3번 삼진으로 위기 탈출 못하는 상황**으로 와닿습니다.

#### 목표 4: 감독의 고민 공유하기
"왜 저 타이밍에 교체했지?"라는 의문이 → **"아, 그 상황이면 나도 교체했을 것 같다"**는 공감으로 바뀝니다.

---

### 제공하는 경험

- ✅ **실시간 대화**: AI 투수/포수와 직접 대화하며 상황 파악
- ✅ **맥락 기반 조언**: 현재 상황을 분석한 AI 코치의 전략 조언
- ✅ **정교한 확률 시뮬레이션**: 세이버메트릭스 + 20-80 스케일 기반
- ✅ **역동적인 경기 흐름**: 투수 피로도, 연속 안타, 위기 상황 등 실시간 변화

야구의 모든 변수와 상황을 **시뮬레이션하고 직접 결정**하며, **통계가 실제 경기에 어떻게 적용되는지** 체험할 수 있습니다.

---

## ✨ 주요 기능

### 1. 🎮 실시간 타석 시뮬레이션
- 20-80 스케일 기반 확률 계산
- 투수 피로도, 동일 투타 매치업, 주자 상황 등 변수 반영
- 볼넷, 삼진, 안타(단타/2루타/3루타/홈런), 아웃 등 다양한 결과

### 2. 🧠 AI 코치 조언 시스템 (Ollama EEVE-Korean)
- 타자/투수 능력치 분석
- 현재 경기 상황(점수차, 이닝, 아웃카운트, 주자) 고려
- 3가지 전략 추천 및 각각의 장단점 설명
- 한국어 자연어로 설명

### 3. 🗣️ 마운드 방문 이벤트 (OpenAI GPT-4o-mini)
#### 자동 트리거 조건:
- 투수 피로도 75% 이상
- 연속 안타 3개 이상 허용
- 득점권 위기 상황 (2/3루 주자 + 1아웃 이하)
- 만루 상황
- 7회 이후 리드 중 실점 위기

#### 대화 시스템:
1. **포수와 투수의 초기 대화** (AI 생성)
   - 포수: 투수 상태 보고 및 조언
   - 투수: 현재 컨디션 및 의지 표현
2. **감독(사용자) 입력**
   - 자유롭게 투수에게 말하기
3. **AI 반응 생성**
   - 감독의 말에 대한 투수/포수의 자연스러운 반응
4. **결정**
   - 계속 투구 / 투수 교체

### 4. 💬 실시간 팬 채팅 (OpenAI GPT-4o-mini)
- 타석 결과에 따른 5-7명의 팬 반응 생성
- 다양한 감정과 채팅체 표현
- 경기 상황(점수차, 이닝)에 따라 다른 분위기

### 5. 📊 실시간 게임 상태 표시
- 스코어보드 (이닝별 점수)
- 현재 투타 대결 (선수 사진, 능력치, 2024 시즌 실제 성적)
- 주자 상황, 볼/스트라이크 카운트
- 플레이 로그 (최근 5개 플레이)

### 6. 🎯 전략 시스템
#### 투구 전략:
- **적극 승부**: 삼진율↑ 볼넷↓ 피안타율↑ (위험한 승부)
- **신중하게**: 삼진율↓ 볼넷↑ 피안타율↓ (안전한 투구)
- **고의4구**: 강타자 피하고 다음 타자 상대

#### 타격 전략:
- **적극 스윙**: 장타율↑ 삼진율↑ 볼넷↓ (홈런 노림)
- **컨택 중심**: 안타율↑ 삼진율↓ 장타율↓ (안타로 출루)
- **볼넷 노림**: 볼넷율↑ 안타율↓ (끈기있게 볼 골라내기)

---

## 🎲 게임 규칙

### 기본 룰
- **9이닝 정규 경기** (연장 가능)
- 홈/어웨이 팀 선택
- 각 팀 9명 타자 라인업 + 선발투수 선택
- 3아웃 시 공수 교대

### 타석 진행
1. 현재 타자 vs 투수 매치업 확인
2. AI 코치 조언 받기 (선택)
3. 전략 선택 또는 전략 없이 진행
4. 결과 확인 및 팬 반응 보기

### 투수 관리
- **피로도**: 투구 수에 따라 자동 증가 (120구 기준 100%)
- **구위 저하**: 피로도 70% 이상 시 능력치 하락
- **교체 타이밍**: 사용자가 직접 결정
- **불펜 관리**: 선발이 아닌 모든 투수가 불펜으로 대기

### 마운드 방문
- 위기 상황 발생 시 자동 트리거
- 또는 "🗣️ 마운드 방문" 버튼으로 수동 실행
- 투수/포수와 대화하며 컨디션 파악
- 계속 투구 or 교체 결정

---

## 👥 선수 데이터 구성

### 데이터 소스
- **MLB 공식 API**: 선수 기본 정보, 사진
- **FanGraphs**: 2024 시즌 실제 성적 데이터 (PyBaseball 사용)
- **20-80 스케일 변환**: 실제 스탯을 스카우트 등급으로 변환

### 현재 구현 팀 (NL West 5개 팀)
- ⚾ Los Angeles Dodgers
- ⚾ San Diego Padres
- ⚾ Arizona Diamondbacks
- ⚾ San Francisco Giants
- ⚾ Colorado Rockies

### 선수 정보 구조
```json
{
  "id": 660271,
  "name": "Shohei Ohtani",
  "position": "DH",
  "bats": "L",
  "throws": "R",
  "team": "Dodgers",
  "stats_2024": {
    "gamesPlayed": 159,
    "avg": ".310",
    "homeRuns": 54,
    "rbi": 130,
    "hits": 197,
    "runs": 134,
    "ops": "1.036"
  },
  "ratings_20_80": {
    "contact": 70,
    "power": 80,
    "eye": 65,
    "speed": 60,
    "overall": 74
  }
}
```

---

## 📊 스탯 시스템

### 20-80 스케일이란?
프로 야구 스카우트가 사용하는 등급 시스템:
- **80**: MLB 최고 수준 (Top 1%)
- **70**: All-Star 수준
- **60**: 평균 이상 레귤러
- **50**: 평균 MLB 선수
- **40**: 평균 이하
- **30**: 벤치 선수
- **20**: 메이저리그 최저 수준

### 타자 능력치
| 능력치 | 설명 | 영향 |
|--------|------|------|
| **Contact** | 배트 컨트롤, 타구 정확도 | 안타율, 삼진율 |
| **Power** | 장타력, 비거리 | 홈런율, 장타율 |
| **Eye** | 선구안, 볼 분별 능력 | 볼넷율, 헛스윙 |
| **Speed** | 주루 속도 | 도루, 내야안타 |
| **Overall** | 종합 평가 | - |

### 투수 능력치
| 능력치 | 설명 | 영향 |
|--------|------|------|
| **Stuff** | 구위, 공의 위력 | 삼진율, 피안타율 |
| **Movement** | 구질 변화량 | 장타 허용률 |
| **Control** | 제구력 | 볼넷율 |
| **Stamina** | 체력, 지구력 | 선발/불펜 구분 |
| **Overall** | 종합 평가 | - |

### 확률 계산 시스템
모든 확률은 **MLB 2024시즌 평균값**을 기준으로 계산됩니다.

#### 볼넷 확률
```python
walk_rate = 8.5 + (타자_eye - 50)/50 * 4 - (투수_control - 50)/50 * 3
# MLB 평균: 8.5%
# 조정 요소:
# - 득점권 상황: +1.5%
# - 투수 피로도 70% 이상: +1.5%
# - 투수 피로도 85% 이상: 추가 +2.5%
# 최종 범위: 3% ~ 18%
```

#### 삼진 확률
```python
k_rate = 23.0 - (타자_contact - 50)/50 * 8 + (투수_stuff - 50)/50 * 7
# MLB 평균: 23.0%
# 조정 요소:
# - 투수 피로도 70% 이상: -3%
# - 투수 피로도 85% 이상: 추가 -5%
# - 동일 투타(예: 우투수 vs 우타자): +2%
# 최종 범위: 10% ~ 40%
```

#### 안타 확률
```python
hit_rate = 25.0 + (타자_contact - 50)/50 * 10 - (투수_stuff - 50)/50 * 8
# MLB 평균: 25.0%
# 조정 요소:
# - 투수 피로도 70% 이상: +3%
# - 투수 피로도 85% 이상: 추가 +5%
# - 동일 투타: -2%
# 최종 범위: 15% ~ 40%
```

#### 홈런 확률 (안타 발생 시)
```python
hr_rate = 14.0 + (타자_power - 50)/50 * 8 - (투수_movement - 50)/50 * 4
# MLB 평균: 14.0% (안타 중 홈런 비율)
# 조정 요소:
# - 전략 보정 (적극 스윙 사용 시 * 2.2)
# 최종 범위: 2% ~ 30%
```

### 실제 스탯 → 20-80 변환 공식

#### 타자 Contact 능력치
**K%(삼진율) + AVG(타율) 기반**
```python
# K% 기반 (MLB 평균 23%)
contact_base = 50 + (23 - k_pct) * 1.5

# AVG 보정 (MLB 평균 .250)
avg_bonus = (avg - 0.250) * 100

contact = clamp(contact_base + avg_bonus, 20, 80)

# 예시:
# Judge: K% 27%, AVG .280 → contact_base = 44, bonus = 3 → 47
# Arraez: K% 10%, AVG .314 → contact_base = 69.5, bonus = 6.4 → 75.9 = 76
```

#### 타자 Power 능력치
**ISO(순수 장타력) + HR(홈런) 기반**
```python
# ISO 기반 (MLB 평균 .150)
power_base = 50 + (iso - 0.150) * 200

# HR 단계별 보정
if hr >= 50:
    hr_bonus = 20
elif hr >= 40:
    hr_bonus = 15
elif hr >= 30:
    hr_bonus = 10
elif hr >= 25:
    hr_bonus = 7
elif hr >= 20:
    hr_bonus = 5
else:
    hr_bonus = max(0, (hr - 10) * 0.3)

power = clamp(power_base + hr_bonus, 20, 80)

# 예시:
# Ohtani: ISO .286, HR 54 → power_base = 77.2, bonus = 20 → 97.2 = 80
# Slap hitter: ISO .100, HR 5 → power_base = 40, bonus = -1.5 → 38.5 = 38
```

#### 타자 Eye 능력치
**BB%(볼넷율) 기반**
```python
# MLB 평균 8.5%
eye = 50 + (bb_pct - 8.5) * 2.5

eye = clamp(eye, 20, 80)

# 예시:
# Soto: BB% 15.2% → eye = 50 + (15.2 - 8.5) * 2.5 = 66.75 = 67
# Free swinger: BB% 4.0% → eye = 50 + (4.0 - 8.5) * 2.5 = 38.75 = 39
```

#### 타자 Speed 능력치
**BsR(주루 기여도) + SB(도루) 기반**
```python
# BsR 기반 (평균 0.0)
speed_base = 50 + bsr * 4

# 도루 보정
sb_bonus = min(sb * 0.4, 20)

speed = clamp(speed_base + sb_bonus, 20, 80)

# 예시:
# Acuña: BsR 5.2, SB 73 → speed_base = 70.8, bonus = 20 → 90.8 = 80
# Slow slugger: BsR -2.1, SB 0 → speed_base = 41.6, bonus = 0 → 41.6 = 42
```

#### 투수 Stuff (구위) 능력치
**K%(삼진율) 기반**
```python
# MLB 평균 22%
stuff = 50 + (k_pct - 22) * 2.5

stuff = clamp(stuff, 20, 80)

# 예시:
# Strider: K% 36.3% → stuff = 50 + (36.3 - 22) * 2.5 = 85.75 = 80
# Soft tosser: K% 15.2% → stuff = 50 + (15.2 - 22) * 2.5 = 33 = 33
```

#### 투수 Control (제구력) 능력치
**BB%(볼넷율) 기반 (낮을수록 좋음)**
```python
# MLB 평균 8.5%
control = 50 + (8.5 - bb_pct) * 3

control = clamp(control, 20, 80)

# 예시:
# Sale: BB% 3.8% → control = 50 + (8.5 - 3.8) * 3 = 64.1 = 64
# Wild pitcher: BB% 12.5% → control = 50 + (8.5 - 12.5) * 3 = 38 = 38
```

#### 투수 Movement (구질 변화량) 능력치
**GB%(땅볼 유도율) 기반**
```python
# MLB 평균 44%
movement = 50 + (gb_pct - 44) * 2

movement = clamp(movement, 20, 80)

# 예시:
# Sinker specialist: GB% 58% → movement = 50 + (58 - 44) * 2 = 78
# Fly ball pitcher: GB% 32% → movement = 50 + (32 - 44) * 2 = 26 = 26
```

#### 투수 Stamina (지구력) 능력치
**IP(이닝) 기반**
```python
# 선발 투수
if ip >= 180: stamina = 70
elif ip >= 160: stamina = 65
elif ip >= 140: stamina = 60
elif ip >= 120: stamina = 55
elif ip >= 100: stamina = 50

# 불펜 투수
elif ip >= 70: stamina = 55
elif ip >= 50: stamina = 50
else: stamina = 45

# 예시:
# Ace starter: IP 210 → stamina = 70
# Setup man: IP 65 → stamina = 55
# Mop-up: IP 35 → stamina = 45
```

---

## 🛠️ 기술 스택

### Frontend
- **Streamlit 1.28+**: 웹 UI 프레임워크
- **Python 3.9+**: 메인 언어

### AI/LLM
- **Ollama**: 로컬 LLM 서버
  - 모델: `EEVE-Korean-10.8B` (한국어 특화)
  - 용도: AI 코치 전략 조언
- **OpenAI GPT-4o-mini**: 클라우드 LLM API
  - 용도: 마운드 대화 생성, 팬 채팅 생성

### Backend
- **구조**: 모듈화된 게임 엔진
  - `game_engine/`: 게임 로직 (타석 시뮬레이션, 상태 관리)
  - `ai/`: LLM 클라이언트 및 프롬프트 생성

### Data
- **MLB Stats API**: 선수 정보 및 사진
- **FanGraphs**: 실제 야구 통계

---

## 🚀 설치 및 실행

### 1. 사전 요구사항

#### Python 환경
```bash
python --version  # 3.9 이상 필요
```

#### Ollama 설치 (AI 코치 기능용)

**방법 1: 자동 설치 스크립트 (권장)**
```bash
# Ollama 설치 + EEVE-Korean 모델 자동 다운로드
bash scripts/setup/run_all.sh
```

**방법 2: 수동 설치**
```bash
# macOS/Linux
curl -fsSL https://ollama.com/install.sh | sh

# 서버 시작
ollama serve

# 한국어 모델 다운로드 (새 터미널)
ollama pull EEVE-Korean-10.8B
```

#### OpenAI API 키 (마운드 대화, 팬 채팅용)
1. https://platform.openai.com/api-keys 에서 키 발급
2. `.env` 파일에 추가 (아래 참고)

---

### 2. 프로젝트 설치

```bash
# 1. 레포지토리 클론
git clone https://github.com/yourusername/mlb-manager-simulator.git
cd mlb-manager-simulator

# 2. 의존성 설치
pip install -r requirements.txt

# 3. 환경 변수 설정
cd backend
cat > .env << EOF
OPENAI_API_KEY=your_openai_api_key_here
OLLAMA_BASE_URL=http://localhost:11434
EOF
cd ..
```

---

### 3. 실행

```bash
# Streamlit 앱 실행
streamlit run app.py
```

브라우저가 자동으로 열리며 `http://localhost:8501` 접속

---

### 4. 사용 방법

1. **팀 선택**
   - 홈팀과 원정팀 선택
   - 선발 라인업 9명 구성
   - 선발 투수 선택

2. **게임 시작**
   - "게임 시작" 버튼 클릭
   - 실시간 스코어보드 확인

3. **타석 진행**
   - 현재 타자 vs 투수 매치업 확인
   - (선택) "AI 코치 조언 받기" 버튼 → 전략 선택
   - "타석 진행" 버튼으로 결과 확인

4. **마운드 방문**
   - 위기 상황 발생 시 자동 팝업
   - 또는 "🗣️ 마운드 방문" 버튼 클릭
   - 투수/포수와 대화 후 결정

5. **투수 교체**
   - "투수 교체" 버튼 클릭
   - 불펜 투수 선택

6. **팬 채팅 보기**
   - "팬 채팅 보기" 버튼으로 실시간 반응 확인

---

## 📁 프로젝트 구조

```
mlb-manager-simulator/
├── app.py                          # 메인 Streamlit 앱
├── requirements.txt                # Python 의존성
├── README.md                       # 프로젝트 문서
├── backend/
│   ├── .env                        # 환경 변수 (API 키)
│   └── app/
│       ├── game_engine/            # 게임 로직
│       │   ├── __init__.py
│       │   ├── game_state.py       # 게임 상태 관리
│       │   ├── at_bat_simulator.py # 타석 확률 계산
│       │   └── strategy.py         # 전략 보정 시스템
│       └── ai/                     # AI 시스템
│           ├── __init__.py
│           ├── ollama_client.py    # Ollama LLM 클라이언트
│           ├── strategy_advisor.py # AI 코치 프롬프트
│           └── commentary.py       # 실시간 중계 생성
├── data/
│   └── mlb/
│       └── nl_west/
│           └── teams/              # 팀별 JSON 데이터
│               ├── dodgers.json
│               ├── padres.json
│               ├── diamondbacks.json
│               ├── giants.json
│               └── rockies.json
└── scripts/
    └── data_collection/            # 데이터 수집 스크립트
        ├── collect_mlb_data.py     # MLB API에서 선수 정보 수집
        ├── enrich_with_fangraphs.py # FanGraphs 스탯 추가
        └── convert_stats_20_80.py  # 20-80 스케일 변환
```

---

## 🎮 게임 플레이 예시

### 시나리오: 7회말 1점 차 리드, 만루 위기

```
[게임 상황]
- 이닝: 7회말
- 점수: 원정 3 - 4 홈 (홈팀 1점 리드)
- 아웃: 1아웃
- 주자: 만루
- 투수: Kershaw (98구, 피로도 82%)
- 타자: Tatis Jr. (Power 75)

[마운드 방문 자동 트리거]
⚾ 마운드 방문 - 만루 위기

포수: "감독님, Kershaw 슬라이더 구위가 많이 떨어졌습니다.
       마지막 이닝 구속도 3km 빠졌어요."

Kershaw: "좀 지쳤지만... 이 타자까지는 제가 잡고 싶습니다.
          믿어주시면 끝까지 책임지겠습니다."

포수: "피로도가 확실히 보여요. 감독님 판단 부탁드립니다."

💬 감독(당신)의 말:
> "커쇼, 고생했어. 여기서 쉬자. 불펜 올린다."

Kershaw: "...알겠습니다, 감독님. 죄송합니다."

[투수 교체]
→ Treinen (Setup, Stuff 72) 등판

[결과]
Treinen이 Tatis Jr.를 내야땅볼로 처리!
병살 실패, 1점 내주고 2아웃
→ 최소 실점으로 위기 모면
```

---

## 📝 향후 개발 계획

### Phase 2
- [ ] 전체 MLB 30개 팀 데이터 추가
- [ ] 대타/대주자 시스템
- [ ] 도루/견제구 시스템
- [ ] 수비 시프트 전략
- [ ] 상대방 수비 위치보고 당겨치거나 밀어치는 전략

### Phase 3
- [ ] 시즌 모드 (162경기)
- [ ] 선수 트레이드 및 FA 영입
- [ ] 부상 시스템
- [ ] 선수 육성 및 성장

### Phase 4
- [ ] 멀티플레이어 (PvP)
- [ ] 리그 랭킹 시스템
- [ ] 토너먼트 모드

---


## 📄 라이선스

이 프로젝트는 MIT 라이선스 하에 배포됩니다. 자세한 내용은 [LICENSE](LICENSE) 파일을 참조하세요.

---



<div align="center">

⚾ **Play Ball!** ⚾

*Made with ❤️ for baseball fans and strategy game lovers*

</div>
